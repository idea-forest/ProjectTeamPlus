@model SteamProject.ViewModels.CompeteInitiateVM
@{
    ViewData["Title"] = "Competition Initiation";
}

<head>
    <link rel="stylesheet" href="~/css/Compete.css">
</head>


<div style="align-content: center; text-align: center; width: 100%; padding-top: 5%; ">
    <h1> Competition Initiation </h1>

    <h3> Achievements you're both missing: </h2>
    <div class="row" style="align-items: center;">
        @foreach ( var achievement in Model.UsersAchievements )
        {
            <div class="col-md-2" style="width: 160px; margin: auto;">

                <br>

                <div class="achievementDiv">
                    <div class="card achievementCard" style="word-wrap: normal; background-image: linear-gradient(to bottom right, rgb(0,0,0), rgb(75,75,75), rgb(0,0,0));">
                        <img class="card-img-top" src="@achievement.Achievement.IconAchievedUrl" style="width: 100%; height: 100%;">
                        <div class="card-body">
                            <p class="card-title" style="color: white;"> @achievement.Achievement.DisplayName </p>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>

    @if( Model.CurrentCompetition == null )
    {
        <button id="ModalBtn">
            Initiate Competition?
        </button>
    }
    
    
</div>

<div id="compareModal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header" id="compareModalHeader" >
                <button type="button" class="close" id="modalCloser" data-dismiss="modal" aria-label="Close">
                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20"><g><rect height="15.4956" opacity="0" width="15.4859" x="0" y="0"/><path d="M0.252699 15.2429C0.594496 15.575 1.1609 15.575 1.49293 15.2429L7.74293 8.99293L13.9929 15.2429C14.325 15.575 14.9011 15.5847 15.2332 15.2429C15.5652 14.9011 15.5652 14.3445 15.2332 14.0125L8.98317 7.7527L15.2332 1.5027C15.5652 1.17067 15.575 0.604261 15.2332 0.27223C14.8914-0.0695668 14.325-0.0695668 13.9929 0.27223L7.74293 6.52223L1.49293 0.27223C1.1609-0.0695668 0.58473-0.0793324 0.252699 0.27223C-0.0793324 0.614027-0.0793324 1.17067 0.252699 1.5027L6.5027 7.7527L0.252699 14.0125C-0.0793324 14.3445-0.0890981 14.9109 0.252699 15.2429Z" fill="#000000" fill-opacity="0.25"/></g></svg>
                </button>
                !!! Competition Creation !!!
            </div>
            <div class="modal-body" style="height: 30rem;">
                <form id="DateSelection" method="post" >
                    <input type="hidden" name="CurrentCompetition.GameId" asp-for="CurrentCompetition.GameId">
                    @for( int i = 0; i < Model.UsersAchievements.Count(); ++i)
                    {
                        @Html.HiddenFor( m => m.UsersAchievements[i].Achieved )
                        @Html.HiddenFor( m => m.UsersAchievements[i].AchievementId )
                        @Html.HiddenFor( m => m.UsersAchievements[i].Id )
                        @Html.HiddenFor( m => m.UsersAchievements[i].OwnerId )
                        @Html.HiddenFor( m => m.UsersAchievements[i].UnlockTime )

                        @Html.HiddenFor( m => m.FriendsAchievements[i].Achieved )
                        @Html.HiddenFor( m => m.FriendsAchievements[i].AchievementId )
                        @Html.HiddenFor( m => m.FriendsAchievements[i].Id )
                        @Html.HiddenFor( m => m.FriendsAchievements[i].OwnerId )
                        @Html.HiddenFor( m => m.FriendsAchievements[i].UnlockTime )
                    }
                    <input type="hidden" name="MySteamId" asp-for="MySteamId">
                    

                    <label class="control-label" for="CurrentCompetition.StartDate"></label>
                    <span class="text-danger"></span>
                    <input id="StartDateInput" type="datetime-local" asp-for="CurrentCompetition.StartDate" name="CurrentCompetition.StartDate" required>

                    <label class="control-label" for="CurrentCompetition.EndDate"></label>
                    <span class="text-danger"></span>
                    <input id="EndDateInput" type="datetime-local" asp-for="CurrentCompetition.EndDate" name="CurrentCompetition.EndDate" required>

                    <input type="submit" >
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script type="text/javascript" src="~/js/competeInitPage.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
}